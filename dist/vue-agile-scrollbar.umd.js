(function(s,c){typeof exports=="object"&&typeof module<"u"?module.exports=c(require("vue")):typeof define=="function"&&define.amd?define(["vue"],c):(s=typeof globalThis<"u"?globalThis:s||self,s["vue-agile-scrollbar"]=c(s.Vue))})(this,function(s){"use strict";const c={minBarSize:{type:Number,default:50},scrollTop:{type:Number,default:0},scrollLeft:{type:Number,default:0},displayType:{type:String,default:"hover"},offsetLeft:{type:Number,default:0},offsetRight:{type:Number,default:10},offsetTop:{type:Number,default:0},offsetBottom:{type:Number,default:10},isAutoUpdate:{type:Boolean,default:!0},dragSpeedX:{type:Number,default:1},dragSpeedY:{type:Number,default:1}},p="",n=(t,l)=>{const o=t.__vccOpts||t;for(const[i,e]of l)o[i]=e;return o},a={name:"vueAgileScrollBar",props:c,data(){return{scrollBarY:{show:!0,clientY:null,height:0,top:this.offsetTop,multiple:1},scrollBarX:{show:!0,clientX:null,width:0,bottom:0,left:this.offsetLeft,multiple:1},scrollWidth:0,scrollHeight:0,scrollContentWidth:0,scrollContentHeight:0}},watch:{offsetLeft(){this.setScrollBarLeft(),this.initScrollBar()},offsetRight(){this.initScrollBar()},offsetTop(){this.setScrollBarTop(),this.initScrollBar()},offsetBottom(){this.initScrollBar()}},mounted(){this.$scrollBox=this.$refs.scrollBox,this.$scroll=this.$refs.scroll,this.$scrollContent=this.$refs.scrollContent,this.setScrollLeft(),this.setScrollTop(),this.updated(),this.isAutoUpdate&&(this.observer=new MutationObserver(this.updated),this.observer.observe(this.$refs.scrollContent,{attributes:!0,childList:!0,subtree:!0})),this.addDragEvent()},methods:{initContainer(){this.scrollWidth=this.$scrollBox.offsetWidth,this.scrollHeight=this.$scrollBox.offsetHeight,this.scrollContentWidth=this.$scrollContent.offsetWidth,this.scrollContentHeight=this.$scrollContent.offsetHeight},initScrollBar(){if(this.scrollContentWidth>this.scrollWidth){const t=this.scrollWidth-(this.scrollContentWidth-this.scrollWidth)-this.offsetLeft-this.offsetRight;this.scrollBarX.show=!0,this.scrollBarX.width=t<this.minBarSize?this.minBarSize:t,this.scrollBarX.multiple=(this.scrollContentWidth-this.scrollWidth)/(this.scrollWidth-this.scrollBarX.width-this.offsetLeft-this.offsetRight)}else this.scrollBarX.show=!1;if(this.scrollContentHeight>this.scrollHeight){const t=this.scrollHeight-(this.scrollContentHeight-this.scrollHeight)-this.offsetTop-this.offsetBottom;this.scrollBarY.show=!0,this.scrollBarY.height=t<this.minBarSize?this.minBarSize:t,this.scrollBarY.multiple=(this.scrollContentHeight-this.scrollHeight)/(this.scrollHeight-this.scrollBarY.height-this.offsetTop-this.offsetBottom),this.scrollBarX.bottom=0}else this.scrollBarY.show=!1,this.scrollBarX.bottom=this.scrollHeight-this.scrollContentHeight+"px"},updated(){this.initContainer(),this.initScrollBar(),this.$emit("updated",{scrollBarY:this.scrollBarY.show,scrollBarX:this.scrollBarX.show,top:this.$scroll.scrollTop,left:this.$scroll.scrollLeft,scrollWidth:this.scrollWidth,scrollHeight:this.scrollHeight,scrollContentWidth:this.scrollContentWidth,scrollContentHeight:this.scrollContentHeight})},setScrollBarLeft(){const t=this.$scroll.scrollLeft,l=this.offsetLeft+Math.floor(t/this.scrollBarX.multiple);return l!==this.scrollBarX.left&&(this.scrollBarX.left=l),t},setScrollBarTop(){const t=this.$scroll.scrollTop,l=this.offsetTop+Math.floor(t/this.scrollBarY.multiple);return l!==this.scrollBarY.top&&(this.scrollBarY.top=l),t},onScroll(t){const l=this.setScrollBarTop(),o=this.setScrollBarLeft();this.$emit("scroll",{top:l,left:o,scrollWidth:this.scrollWidth,scrollHeight:this.scrollHeight,scrollContentWidth:this.scrollContentWidth,scrollContentHeight:this.scrollContentHeight},t),this.$attrs.onScrollHit&&this.onScrollHit(l,o)},onScrollHit(t,l){let o="top",i=t-this.initTop,e=l-this.initLeft;this.initTop=t,this.initLeft=l;const r=()=>{this.$emit("scroll-hit",o,{top:t,left:l,scrollWidth:this.scrollWidth,scrollHeight:this.scrollHeight,scrollContentWidth:this.scrollContentWidth,scrollContentHeight:this.scrollContentHeight})};i!==0&&this.scrollBarY.height&&(i<0?o="top":o="bottom",this.scrollContentHeight-this.scrollHeight-t===0&&r(),t===0&&o==="top"&&r()),e!==0&&this.scrollBarX.width&&(e<0?o="left":o="right",l===0&&o==="left"||this.scrollContentWidth-this.scrollWidth-l===0||(o="xMiddle"),r())},scrollBarDown(t,l){l==="scrollBarX"&&(this.scrollBarX.clientX=t.clientX,this.scrollBarX.scrollLeft=this.$scroll.scrollLeft),l==="scrollBarY"&&(this.scrollBarY.clientY=t.clientY,this.scrollBarY.scrollTop=this.$scroll.scrollTop),window.addEventListener("mousemove",this.scrollBarDrag)},scrollBarDrag(t){const l=this.scrollBarX.clientX,o=this.scrollBarY.clientY;if(l){let i=t.clientX-l;this.$scroll.scrollLeft=this.scrollBarX.scrollLeft+i*(this.scrollBarX.multiple*this.dragSpeedX)}if(o){let i=t.clientY-o;this.$scroll.scrollTop=this.scrollBarY.scrollTop+i*this.scrollBarY.multiple*this.dragSpeedY}},scrollBarUp(){this.scrollBarX.clientX=null,this.scrollBarY.clientY=null,window.removeEventListener("mousemove",this.scrollBarDrag)},addDragEvent(){window.addEventListener("mouseup",this.scrollBarUp)},removeDragEvent(){window.removeEventListener("mouseup",this.addDragEvent)},setScrollLeft(t){(t>=0||this.scrollLeft>=0)&&(this.$scroll.scrollLeft=t||this.scrollLeft)},setScrollTop(t){(t>=0||this.scrollTop>=0)&&(this.$scroll.scrollTop=t||this.scrollTop)}},beforeUnmount(){this.isAutoUpdate&&this.observer&&this.observer.disconnect(),this.removeDragEvent()}},f={class:"agile-scroll-wrapper",ref:"scrollContent"};function d(t,l,o,i,e,r){return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["vue-agile-scrollbar",{"not-user-select":e.scrollBarX.clientX||e.scrollBarY.clientY,"scrollbar-hover":t.displayType==="hover","scrollbar-hide":t.displayType==="hide"}]),ref:"scrollBox"},[s.createElementVNode("div",{class:"agile-scroll-content",ref:"scroll",onScroll:l[0]||(l[0]=(...h)=>r.onScroll&&r.onScroll(...h))},[s.createElementVNode("div",f,[s.renderSlot(t.$slots,"default")],512)],544),e.scrollBarX.show?(s.openBlock(),s.createElementBlock("div",{key:0,class:s.normalizeClass(["agile-scroll-bar-x",{act:e.scrollBarX.clientX}]),style:s.normalizeStyle({left:e.scrollBarX.left+"px",width:e.scrollBarX.width+"px",bottom:e.scrollBarX.bottom}),onMousedown:l[1]||(l[1]=h=>r.scrollBarDown(h,"scrollBarX"))},null,38)):s.createCommentVNode("",!0),e.scrollBarY.show?(s.openBlock(),s.createElementBlock("div",{key:1,class:s.normalizeClass(["agile-scroll-bar-y",{act:e.scrollBarY.clientY}]),style:s.normalizeStyle({top:e.scrollBarY.top+"px",height:e.scrollBarY.height+"px"}),onMousedown:l[2]||(l[2]=h=>r.scrollBarDown(h,"scrollBarY"))},null,38)):s.createCommentVNode("",!0)],2)}return n(a,[["render",d]])});
